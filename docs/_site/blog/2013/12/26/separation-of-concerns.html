<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Iain C Docherty - Separation of Concerns</title>
  <meta name="author" content="Iain C Docherty" />
  <meta name="description" content="The blog of Iain C Docherty" />
  <link rel="canonical" href="http://spacebotwar.com:4000/blog/2013/12/26/separation-of-concerns.html" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="http://spacebotwar.com:4000/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Iain C Docherty" href="http://spacebotwar.com:4000/atom.xml" />

  <link rel="stylesheet" href="http://spacebotwar.com:4000/assets/css/all.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.min.css">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <a href="/">
    <img src="/sp_ship.png" id="logo" alt="Site logo"/>
  </a>
  <h2><a href="/">SpaceBotWar</a>.</h2>
  <hr/>
  <h2>
  
    <a href="/api">API Documents</a>
  
  </h2>
  
  </h2>
  <hr/>
  <h2><a href="/blog">Blog posts</a></h2>
  <hr/>
  <h2><a href="/about">About</a></h2>
  <hr/>
  <h2><a href="/faq">FAQ</a></h2>
  <hr/>
  <div>
    <div id="social">
      Follow me:
<div id="stalker">
  
  <a title="icydee on Github" href="https://github.com/icydee">
    <i class="fa fa-github-square"></i>
  </a>
  

  

  

  

  

  

  
  <a title="Iain C Docherty on Facebook" href="https://facebook.com/icydee">
    <i class="fa fa-facebook-square"></i>
  </a>
  

  

  
  <a title="Iain C Docherty on LinkedIn" href="https://www.linkedin.com/in/icydee">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  

  <a title="RSS feed" id="rss" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
</div>

    </div>
  </div>
  </ul>
</nav>

    </div>

    <div class="eleven columns content">
      <p class="meta">
  December 26, 2013 
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">Separation of Concerns</h1>

<div id="post">
  <p>Learning about the Javascript framework <a href="http://backbonejs.org">Backbone</a> has been a timeconsuming process, but I think it is worthwhile especially when embarking on a potentially large javascript application (like SpaceBotWar).</p>

<p>One problem I have encountered many times in the past is convoluted code which has many diverse tasks. e.g. code which captures user input, sends data to the server, waits for the response, renders the html output, all mixed in together.</p>

<p>Backbone solves this problem elegantly but it requires a bit of thought, this example shows how I tackled the thorny issue of how to log in and out :)</p>

<p>Using the Model View Controller design pattern we can create a Model that just models the status of the user.</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// app/models/login_status.js</span>

<span class='nx'>define</span><span class='p'>([</span>    <span class='s2'>&quot;jquery&quot;</span><span class='p'>,</span>   <span class='s2'>&quot;backbone&quot;</span><span class='p'>],</span>
<span class='kd'>function</span><span class='p'>(</span>    <span class='nx'>$</span><span class='p'>,</span>          <span class='nx'>Backbone</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// Creates a new Backbone Model class object</span>
    <span class='kd'>var</span> <span class='nx'>LoginStatus</span> <span class='o'>=</span> <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>({</span>

        <span class='nx'>defaults</span> <span class='o'>:</span> <span class='p'>{</span>
            <span class='nx'>logged_in</span>   <span class='o'>:</span> <span class='kc'>false</span><span class='p'>,</span>
        <span class='p'>},</span>
        <span class='nx'>initialize</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
        <span class='p'>}</span>
    <span class='p'>});</span>
    <span class='k'>return</span> <span class='nx'>LoginStatus</span><span class='p'>;</span>
<span class='p'>});</span>
</code></pre></div>
<p>As it stands, it just has a single attribute, ‘logged_in’ which reflects the logged in status of the user.</p>

<p>In order to log in, we need a log-in form. When we are logged out, we will display a form to allow username and password to be entered, when we are logged in we can display a button to ‘log out’. Now this could be done by having a template and passing in the ‘logged_in’ status and having conditional code to display either one view or the other. I prefer keeping logic out of the template and putting it in the view so I created two templates.</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- app/templates/all/main/logged_out.html --&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;login&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;text&quot;</span> <span class='na'>placeholder=</span><span class='s'>&quot;Username&quot;</span> <span class='na'>id=</span><span class='s'>&quot;username&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;password&quot;</span> <span class='na'>placeholder=</span><span class='s'>&quot;Password&quot;</span> <span class='na'>id=</span><span class='s'>&quot;password&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;p&gt;&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;login&quot;</span> <span class='na'>type=</span><span class='s'>&quot;button&quot;</span> <span class='na'>class=</span><span class='s'>&quot;btn btn-default&quot;</span><span class='nt'>&gt;</span>Sign In<span class='nt'>&lt;/button&gt;</span>
  <span class='nt'>&lt;a</span> <span class='na'>id=</span><span class='s'>&quot;lost_password&quot;</span> <span class='na'>href=</span><span class='s'>&quot;/#/lost_password&quot;</span> <span class='na'>class=</span><span class='s'>&quot;forgot&quot;</span><span class='nt'>&gt;</span>lost password?<span class='nt'>&lt;/a&gt;&lt;/p&gt;</span>
  <span class='nt'>&lt;p&gt;&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;register&quot;</span> <span class='na'>type=</span><span class='s'>&quot;button&quot;</span> <span class='na'>class=</span><span class='s'>&quot;btn btn-default&quot;</span><span class='nt'>&gt;</span>Register<span class='nt'>&lt;/button&gt;&lt;/p&gt;</span>
<span class='nt'>&lt;/div&gt;</span>
</code></pre></div><div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- app/templates/all/main/logged_in.html --&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>class=</span><span class='s'>&quot;login&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;p&gt;&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;logout&quot;</span> <span class='na'>type=</span><span class='s'>&quot;button&quot;</span> <span class='na'>class=</span><span class='s'>&quot;btn btn-default&quot;</span><span class='nt'>&gt;</span>Log Out<span class='nt'>&lt;/button&gt;</span>
<span class='nt'>&lt;/div&gt;</span>
</code></pre></div>
<p>The decision on which one of these templates is displayed can now be delegated to the View.</p>
<div class='highlight'><pre><code class='javascript'><span class='c'>&lt;!--</span> <span class='nx'>app</span><span class='o'>/</span><span class='nx'>views</span><span class='o'>/</span><span class='nx'>dt</span><span class='o'>/</span><span class='nx'>main</span><span class='o'>/</span><span class='nx'>login_status</span><span class='p'>.</span><span class='nx'>js</span> <span class='o'>--&gt;</span>

<span class='nx'>define</span><span class='p'>([</span>    <span class='s1'>&#39;jquery&#39;</span><span class='p'>,</span>   <span class='s1'>&#39;hbs!templates/all/main/logged_in&#39;</span><span class='p'>,</span>  <span class='s1'>&#39;hbs!templates/all/main/logged_out&#39;</span><span class='p'>,</span> <span class='s1'>&#39;backbone&#39;</span><span class='p'>,</span> <span class='s1'>&#39;marionette&#39;</span><span class='p'>],</span>
<span class='kd'>function</span> <span class='p'>(</span>   <span class='nx'>$</span><span class='p'>,</span>          <span class='nx'>template_logged_in</span><span class='p'>,</span>                 <span class='nx'>template_logged_out</span><span class='p'>,</span>                <span class='nx'>Backbone</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>//ItemView provides some default rendering logic</span>
    <span class='k'>return</span> <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>Marionette</span><span class='p'>.</span><span class='nx'>ItemView</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>({</span>
        <span class='nx'>render</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
            <span class='k'>if</span> <span class='p'>(</span><span class='k'>this</span><span class='p'>.</span><span class='nx'>model</span><span class='p'>.</span><span class='nx'>get</span><span class='p'>(</span><span class='s1'>&#39;logged_in&#39;</span><span class='p'>))</span> <span class='p'>{</span>
                <span class='nx'>$</span><span class='p'>(</span><span class='k'>this</span><span class='p'>.</span><span class='nx'>el</span><span class='p'>).</span><span class='nx'>empty</span><span class='p'>().</span><span class='nx'>html</span><span class='p'>(</span><span class='nx'>template_logged_in</span><span class='p'>);</span>
            <span class='p'>}</span>
            <span class='k'>else</span> <span class='p'>{</span>
                <span class='nx'>$</span><span class='p'>(</span><span class='k'>this</span><span class='p'>.</span><span class='nx'>el</span><span class='p'>).</span><span class='nx'>empty</span><span class='p'>().</span><span class='nx'>html</span><span class='p'>(</span><span class='nx'>template_logged_out</span><span class='p'>);</span>
            <span class='p'>}</span>
        <span class='p'>}</span>
        <span class='nx'>initialize</span>  <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
            <span class='k'>this</span><span class='p'>.</span><span class='nx'>model</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span><span class='s1'>&#39;change:logged_in&#39;</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>render</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>);</span>
        <span class='p'>}</span>
    <span class='p'>});</span>
<span class='p'>});</span>
</code></pre></div>
<p>As it stands, when the app starts, it will display the login form, since the logged_in attribute in the model defaults to false (which is what we want).</p>

<p>Notice that the View binds to any change in the logged_in attribute of the Model. This is what I mean by separation of concerns. The View simply has to render the appropriate template whenever the logged_in status changes, it does not care <em>how</em> it changes. Similarly all the Model has to do is maintain the status of the attribute and not care about how the View changes.</p>

<p>Now, what should happen when we fill in the login form, username and password and click the ‘Log in’ button? Well, eventually it needs to send a message to the server and get the response, but again I am going to delegate that work to something other than the view.</p>
<div class='highlight'><pre><code class='javascript'><span class='c'>&lt;!--</span> <span class='nx'>app</span><span class='o'>/</span><span class='nx'>views</span><span class='o'>/</span><span class='nx'>dt</span><span class='o'>/</span><span class='nx'>main</span><span class='o'>/</span><span class='nx'>login_status</span><span class='p'>.</span><span class='nx'>js</span> <span class='o'>--&gt;</span>

    <span class='p'>...</span>
    <span class='k'>return</span> <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>Marionette</span><span class='p'>.</span><span class='nx'>ItemView</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>({</span>
        <span class='nx'>render</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
            <span class='p'>...</span>
        <span class='p'>},</span>
        <span class='nx'>events</span>          <span class='o'>:</span> <span class='p'>{</span>
            <span class='s1'>&#39;click #login&#39;</span>          <span class='o'>:</span> <span class='s1'>&#39;login&#39;</span><span class='p'>,</span>
            <span class='s1'>&#39;click #logout&#39;</span>         <span class='o'>:</span> <span class='s1'>&#39;logout&#39;</span><span class='p'>,</span>
        <span class='p'>},</span>
        <span class='nx'>login</span>   <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
            <span class='kd'>var</span> <span class='nx'>username</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#username&#39;</span><span class='p'>).</span><span class='nx'>val</span><span class='p'>();</span>
            <span class='kd'>var</span> <span class='nx'>password</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#password&#39;</span><span class='p'>).</span><span class='nx'>val</span><span class='p'>();</span>
            <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>trigger</span><span class='p'>(</span><span class='s2'>&quot;user:login&quot;</span><span class='p'>,</span> <span class='p'>{</span>  <span class='nx'>username</span> <span class='o'>:</span> <span class='nx'>username</span><span class='p'>,</span> <span class='nx'>password</span> <span class='o'>:</span> <span class='nx'>password</span><span class='p'>}</span> <span class='p'>);</span>
        <span class='p'>},</span>
        <span class='nx'>logout</span>  <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
            <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>trigger</span><span class='p'>(</span><span class='s2'>&quot;user:logout&quot;</span><span class='p'>);</span>
        <span class='p'>},</span>


    <span class='p'>...</span>
</code></pre></div>
<p>In this case I have bound the <em>click</em> events for the <em>login</em> and <em>logout</em> buttons to similarly named methods. In those routines I have made use of the Backbone event handler to <em>trigger</em> an event using the namespaces <strong>user:login</strong> and <strong>user:logout</strong> respectively. As far as the view is concerned, it does not matter how these events are handled, so long as there is something listening for those events. Indeed there can be more than one listener and all of them would be informed.</p>

<p>And the listener? Well I decided to create a component that had the sole responsibility of co-ordinating communication with the server. Part of which is as follows. <a href="http://lostechies.com/derickbailey/2012/04/19/decoupling-backbone-apps-from-websockets/">This article on decoupling</a> was the influence for the design.</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// app/components/lobby.js</span>

<span class='nx'>define</span><span class='p'>([</span>    <span class='s1'>&#39;my-config&#39;</span><span class='p'>,</span>    <span class='s1'>&#39;jquery&#39;</span><span class='p'>,</span>    <span class='s1'>&#39;backbone&#39;</span><span class='p'>,</span> <span class='s1'>&#39;humane&#39;</span><span class='p'>,</span>  <span class='s1'>&#39;jquery.json&#39;</span><span class='p'>],</span>
<span class='kd'>function</span> <span class='p'>(</span>   <span class='nx'>MyConfig</span><span class='p'>,</span>       <span class='nx'>$</span><span class='p'>,</span>           <span class='nx'>Backbone</span><span class='p'>,</span>   <span class='nx'>Humane</span><span class='p'>)</span> <span class='p'>{</span>

    <span class='c1'>// The Lobby is responsible for handling login and registration</span>
    <span class='c1'>//</span>
    <span class='kd'>var</span> <span class='nx'>Lobby</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
        <span class='kd'>var</span> <span class='nx'>ws</span><span class='p'>;</span>

        <span class='k'>return</span> <span class='p'>{</span>
            <span class='nx'>init</span>    <span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
                <span class='p'>...</span>
                <span class='c1'>// The user has logged in</span>
                <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>on</span><span class='p'>(</span><span class='s2'>&quot;user:login&quot;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>data</span><span class='p'>)</span> <span class='p'>{</span>
                    <span class='kd'>var</span> <span class='nx'>msg</span> <span class='o'>=</span> <span class='p'>{</span>
                        <span class='nx'>route</span>   <span class='o'>:</span> <span class='s2'>&quot;/lobby/login_with_password&quot;</span><span class='p'>,</span>
                        <span class='nx'>content</span> <span class='o'>:</span> <span class='p'>{</span>
                            <span class='nx'>password</span>    <span class='o'>:</span> <span class='nx'>data</span><span class='p'>.</span><span class='nx'>password</span><span class='p'>,</span>
                            <span class='nx'>username</span>    <span class='o'>:</span> <span class='nx'>data</span><span class='p'>.</span><span class='nx'>username</span><span class='p'>,</span>
                            <span class='nx'>client_code</span> <span class='o'>:</span> <span class='nx'>client_code</span>
                        <span class='p'>}</span>
                    <span class='p'>};</span>
                    <span class='nx'>ws</span><span class='p'>.</span><span class='nx'>send</span><span class='p'>(</span><span class='nx'>JSON</span><span class='p'>.</span><span class='nx'>stringify</span><span class='p'>(</span><span class='nx'>msg</span><span class='p'>));</span>
                <span class='p'>});</span>
                <span class='c1'>// The user has logged out</span>
                <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>on</span><span class='p'>(</span><span class='s2'>&quot;user:logout&quot;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
                    <span class='kd'>var</span> <span class='nx'>msg</span> <span class='o'>=</span> <span class='p'>{</span>
                        <span class='nx'>route</span>   <span class='o'>:</span> <span class='s2'>&quot;/lobby/logout&quot;</span><span class='p'>,</span>
                        <span class='nx'>content</span> <span class='o'>:</span> <span class='p'>{</span>
                            <span class='nx'>client_code</span> <span class='o'>:</span> <span class='nx'>client_code</span>
                        <span class='p'>}</span>
                    <span class='p'>};</span>
                    <span class='nx'>ws</span><span class='p'>.</span><span class='nx'>send</span><span class='p'>(</span><span class='nx'>JSON</span><span class='p'>.</span><span class='nx'>stringify</span><span class='p'>(</span><span class='nx'>msg</span><span class='p'>));</span>
                <span class='p'>});</span>
                <span class='p'>...</span>
            <span class='p'>}</span>
        <span class='p'>};</span>
    <span class='p'>};</span>
    <span class='k'>return</span> <span class='nx'>Lobby</span><span class='p'>;</span>
<span class='p'>});</span>
</code></pre></div>
<p><strong>ws</strong> is a WebSocket object, the details of which I won’t go into, suffice to say that it has a <strong>send</strong> method which sends a message to the server and an <strong>onmessage</strong> method which accepts messages from the server.</p>

<p>The two <em>Backbone.on</em> methods are registering a callback function for each of the events <strong>user:login</strong> and <strong>user:logout</strong> that we saw earlier in the <strong>LoginStatus</strong> view.</p>

<p>We happen to be using Web Sockets to communicate with the server, but by decoupling the code in this way we would be free to change the communication with minimal change to the rest of the code.</p>

<p>The <strong>user:login</strong> event results in a message to the server of <strong>/lobby/login_with_password</strong></p>

<p>All that remains now is to create an event on recept of the server confirming the receipt of the login or the logout messages, which put a <strong>ws:recv:/lobby/login_with_password</strong> or a <strong>ws:recv:/logout</strong> message on the Event Handler bus respectively.</p>

<p>And what do we need to do when we receive confirmation? We need to change the state of the <strong>logged_in</strong> attribute in the LoginStatus Model of course.</p>
<div class='highlight'><pre><code class='javascript'>    <span class='c1'>// app/models/login_status.js</span>

    <span class='p'>...</span>
    <span class='kd'>var</span> <span class='nx'>LoginStatus</span> <span class='o'>=</span> <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>({</span>

        <span class='p'>...</span>
        <span class='nx'>initialize</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
            <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>on</span><span class='p'>(</span><span class='s2'>&quot;ws:recv:/lobby/login_with_password&quot;</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>login_success</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>);</span>
            <span class='nx'>Backbone</span><span class='p'>.</span><span class='nx'>on</span><span class='p'>(</span><span class='s2'>&quot;ws:recv:/lobby/logout&quot;</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>logout_success</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>);</span>
        <span class='p'>},</span>

        <span class='nx'>logout_success</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>data</span><span class='p'>)</span> <span class='p'>{</span>
            <span class='k'>this</span><span class='p'>.</span><span class='nx'>set</span><span class='p'>({</span><span class='s1'>&#39;logged_in&#39;</span> <span class='o'>:</span> <span class='kc'>false</span><span class='p'>});</span>
        <span class='p'>},</span>

        <span class='nx'>login_success</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>data</span><span class='p'>)</span> <span class='p'>{</span>
            <span class='k'>this</span><span class='p'>.</span><span class='nx'>set</span><span class='p'>({</span><span class='s1'>&#39;logged_in&#39;</span> <span class='o'>:</span> <span class='kc'>true</span><span class='p'>});</span>
        <span class='p'>},</span>
        <span class='p'>...</span>
</code></pre></div>
<p>Which takes us full circle since we have already seen that when the <strong>logged_in</strong> status changes it also triggers a change in the view.</p>

<p>And although this might seem to be a convoluted and complex method to simply handle a single flag (logged_in) it really comes into it’s own with more complex examples, ensuring that each module has a simple, single thing to do. It also makes testing so much easier as well!</p>
</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
    <li>
      <span>23 Dec 2013 &raquo;</span> <a href="/blog/2013/12/23/battles.html">About Battles</a>
    </li>
    
    <li>
      <span>20 Dec 2013 &raquo;</span> <a href="/blog/2013/12/20/first-post.html">First Post</a>
    </li>
    
  </ul>
</div>


      <div class="footer">
        <div class="disclaimer">
  

  <p>
    © Iain C Docherty, 2013 &mdash; 
  </p>
</div>

      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
