<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Iain C Docherty - API Documents</title>
  <meta name="author" content="Iain C Docherty" />
  <meta name="description" content="The blog of Iain C Docherty" />
  <link rel="canonical" href="http://spacebotwar.com:4000/api/match/" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="http://spacebotwar.com:4000/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Iain C Docherty" href="http://spacebotwar.com:4000/atom.xml" />

  <link rel="stylesheet" href="http://spacebotwar.com:4000/assets/css/all.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.min.css">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <a href="/">
    <img src="/sp_ship.png" id="logo" alt="Site logo"/>
  </a>
  <h2><a href="/">SpaceBotWar</a>.</h2>
  <hr/>
  <h2>
  
    <a href="/api">API Documents</a>
  
  </h2>
  
    
      <h3><a href="/api/start">Start</a></h3>
    
    
      <h3><a href="/api/arena">Arena</a></h3>
    
    
      Match
    
  
  </h2>
  <hr/>
  <h2><a href="/blog">Blog posts</a></h2>
  <hr/>
  <h2><a href="/about">About</a></h2>
  <hr/>
  <h2><a href="/faq">FAQ</a></h2>
  <hr/>
  <div>
    <div id="social">
      Follow me:
<div id="stalker">
  
  <a title="icydee on Github" href="https://github.com/icydee">
    <i class="fa fa-github-square"></i>
  </a>
  

  

  

  

  

  

  
  <a title="Iain C Docherty on Facebook" href="https://facebook.com/icydee">
    <i class="fa fa-facebook-square"></i>
  </a>
  

  

  
  <a title="Iain C Docherty on LinkedIn" href="https://www.linkedin.com/in/icydee">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  

  <a title="RSS feed" id="rss" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
</div>

    </div>
  </div>
  </ul>
</nav>

    </div>

    <div class="eleven columns content">
      <h1 id="match">Match</h1>

<p>All methods in this section can be carried out by a connection to one of the match servers given in the <strong>Arena</strong> API. e.g. <strong>ws://spacebotwar.com/ws/match/scott</strong></p>

<p>Each method appends to the route <strong>/</strong> e.g. ‘arena_status’ method would be on route <strong>/arena_status</strong></p>
<hr />
<h1 id="server__connect">Server : connect</h1>

<p>On making a Web Socket connection, the server will send a <strong>connect</strong> message indicating the current status of the server. It may also send an update whenever the server status changes.</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>
    <span class='nt'>&quot;code&quot;</span>          <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
    <span class='nt'>&quot;message&quot;</span>       <span class='p'>:</span> <span class='s2'>&quot;Welcome to the Match&quot;</span><span class='p'>,</span>
    <span class='nt'>&quot;data&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;match&quot;</span><span class='p'>,</span>
<span class='p'>}</span>
</code></pre></div>
<h2 id="code">code</h2>

<p>The numeric code representing the status of the <strong>server</strong> where <strong>0</strong> represents success and any other value indicates a fault.</p>

<h2 id="message">message</h2>

<p>A human readable message, for example a message to the effect that the server is off-line.</p>

<h2 id="data">data</h2>

<p>Supplimentary data, for example the time at which the server is due back on line.</p>
<hr />
<h1 id="client__match_status">Client : match_status</h1>

<p>Request the current status of the match you have just joined.</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>
    <span class='nt'>&quot;client_code&quot;</span>   <span class='p'>:</span> <span class='s2'>&quot;1660686c-8b5d-3b7c-825d-1d828db8f9ca-2f928&quot;</span><span class='p'>,</span>
<span class='p'>}</span>
</code></pre></div>
<h2 id="msg_id_not_required">msg_id (not required)</h2>

<p>Do not issue a <strong>msg_id</strong> with this request, since the server will send multiple responses the msg_id is not honoured.</p>

<h2 id="response">RESPONSE</h2>

<p>The server will respond with a <strong>Server : match_status</strong> message, immediately with the current match status, then in the future if any changes take place in the room.</p>
<hr />
<h1 id="server__match_status">Server : match_status</h1>

<p>The server will send this message, either on request from a <strong>Client : match_status</strong> message, or periodically if there is a change to the arena status (e.g. a new match starts).</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>
    <span class='nt'>&quot;spectators&quot;</span>    <span class='p'>:</span> <span class='mi'>23</span><span class='p'>,</span>
    <span class='nt'>&quot;start_time&quot;</span>    <span class='p'>:</span> <span class='mi'>-30</span><span class='p'>,</span>
    <span class='nt'>&quot;status&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;running&quot;</span><span class='p'>,</span>
    <span class='nt'>&quot;competitors&quot;</span>       <span class='p'>:</span> <span class='p'>[{</span>
        <span class='nt'>&quot;name&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;Scaredy Pants&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;rank&quot;</span>          <span class='p'>:</span> <span class='mi'>37</span><span class='p'>,</span>
        <span class='nt'>&quot;programmer&quot;</span>    <span class='p'>:</span> <span class='s2'>&quot;Dr Death&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;health&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;34&quot;</span>
    <span class='p'>},{</span>
        <span class='nt'>&quot;name&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;Hunter&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;rank&quot;</span>          <span class='p'>:</span> <span class='mi'>42</span><span class='p'>,</span>
        <span class='nt'>&quot;programmer&quot;</span>    <span class='p'>:</span> <span class='s2'>&quot;Blotto&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;health&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;12&quot;</span>
    <span class='p'>}],</span>
<span class='p'>}</span>
</code></pre></div><hr />
<h1 id="server__match_tick">Server : match_tick</h1>

<p>The server will send this message periodically (every 500ms during a match) and it is intended to supply the current status, position, direction of all ships and missiles. The client can use this information to show a real-time enactment of the battle taking place. Since the data is refreshed at intervals of 500ms the client should interpolate from one 500ms <strong>tick</strong> to the next. It is acceptable for the client to lag by 500ms in order to allow interpolation to take place.</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>
    <span class='nt'>&quot;game_time&quot;</span>     <span class='p'>:</span> <span class='mf'>43.5</span><span class='p'>,</span>
    <span class='nt'>&quot;ships&quot;</span>         <span class='p'>:</span> <span class='p'>[{</span>
        <span class='nt'>&quot;competitor&quot;</span>    <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
        <span class='nt'>&quot;ship_id&quot;</span>       <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
        <span class='nt'>&quot;x&quot;</span>             <span class='p'>:</span> <span class='mi'>2303</span><span class='p'>,</span>
        <span class='nt'>&quot;y&quot;</span>             <span class='p'>:</span> <span class='mi'>1200</span><span class='p'>,</span>
        <span class='nt'>&quot;direction&quot;</span>     <span class='p'>:</span> <span class='mf'>1.235</span><span class='p'>,</span>
        <span class='nt'>&quot;orientation&quot;</span>   <span class='p'>:</span> <span class='mf'>1.205</span><span class='p'>,</span>
        <span class='nt'>&quot;speed&quot;</span>         <span class='p'>:</span> <span class='mi'>24</span><span class='p'>,</span>
        <span class='nt'>&quot;rotation&quot;</span>      <span class='p'>:</span> <span class='mf'>-0.3</span><span class='p'>,</span>
        <span class='nt'>&quot;status&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;ok&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;health&quot;</span>        <span class='p'>:</span> <span class='mf'>85.3</span>
    <span class='p'>},{</span>
        <span class='err'>...</span>
    <span class='p'>},{</span>
        <span class='err'>...</span>
    <span class='p'>}</span>
    <span class='p'>],</span>
    <span class='nt'>&quot;missiles&quot;</span>      <span class='p'>:</span> <span class='p'>[{</span>
        <span class='nt'>&quot;competitor&quot;</span>    <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
        <span class='nt'>&quot;missile_id&quot;</span>    <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
        <span class='nt'>&quot;x&quot;</span>             <span class='p'>:</span> <span class='mi'>189</span><span class='p'>,</span>
        <span class='nt'>&quot;y&quot;</span>             <span class='p'>:</span> <span class='mi'>1399</span><span class='p'>,</span>
        <span class='nt'>&quot;direction&quot;</span>     <span class='p'>:</span> <span class='mf'>-1.34</span><span class='p'>,</span>
        <span class='nt'>&quot;speed&quot;</span>         <span class='p'>:</span> <span class='mi'>54</span><span class='p'>,</span>
        <span class='nt'>&quot;status&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;explode&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;type&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;laser&quot;</span><span class='p'>,</span>
    <span class='p'>},{</span>
        <span class='err'>...</span>
    <span class='p'>}</span>
    <span class='p'>]</span>
<span class='p'>}</span>
</code></pre></div>
<h2 id="game_time">game_time</h2>

<p>The time from when the game started. A game starts at <strong>game_time</strong> zero so if it is negative, it means the game is being set up and has not yet started.</p>

<h2 id="ships">ships</h2>

<p>An array of all ships in the game, for all competitors. Typically there will be 12 ships, six from each competitor.</p>

<h3 id="competitor">competitor</h3>

<p>This is the index into the competitors described in the <strong>Server : status</strong> message. and will have the value zero or one.</p>

<h3 id="ship_id">ship_id</h3>

<p>A ship identifier, there being 12 ships these will be numbered zero through to eleven.</p>

<h3 id="x_and_y">x and y</h3>

<p>The X and Y co-ordinate of the ship at this point in time.</p>

<h3 id="direction">direction</h3>

<p>The direction the ship is moving, in radians, note this may be negative or positive.</p>

<h3 id="speed">speed</h3>

<p>The speed that the ship is moving (in pixels per second)</p>

<h3 id="orientation">orientation</h3>

<p>The direction the ship is pointing. Generally this will be the same as the direction of movement, unless the ship has sideways or reverse thrust.</p>

<h3 id="rotation">rotation</h3>

<p>The rate at which the orientation of the ship is changing, in radians per second. Note, a positive value means it is rotating anti-clockwise, a negative value indicates clockwise rotation.</p>

<h3 id="status">status</h3>

<p>The status of the ship, one of <strong>ok</strong>, <strong>damaged</strong>, or <strong>dead</strong></p>

<h3 id="health">health</h3>

<p>The health of the ship as a percentage. Ships start at 100% health and as they are damaged they lose health. At zero percent, the ship status will change (to “dead”) and the ship will be removed from the arena.</p>

<h2 id="missiles">missiles</h2>

<p>Missiles have similar attributes to ships,</p>

<h3 id="competitor_2">competitor</h3>

<p>As above.</p>

<h3 id="missile_id">missile_id</h3>

<p>All missiles are identified by a unique ID.</p>

<h3 id="x_and_y_2">x and y</h3>

<p>As above.</p>

<h3 id="direction_and_speed">direction and speed</h3>

<p>As above.</p>

<h3 id="orientation_rotation">orientation, rotation</h3>

<p>Missiles are always orientatied in the direction of their movement and they don’t rotate.</p>

<h3 id="status_2">status</h3>

<p>The status can be used to distinguish different phases of the missile. e.g. <strong>launch</strong>, <strong>running</strong>, <strong>explosion</strong></p>

<h3 id="type">type</h3>

<p>The type of the missile, may be used to indicate different missiles and images for them, e.g. <strong>laser</strong>, <strong>rocket</strong>, etc.</p>

      <div class="footer">
        <div class="disclaimer">
  

  <p>
    © Iain C Docherty, 2013 &mdash; 
  </p>
</div>

      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
