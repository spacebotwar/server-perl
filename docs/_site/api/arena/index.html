<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Iain C Docherty - API Documents</title>
  <meta name="author" content="Iain C Docherty" />
  <meta name="description" content="The blog of Iain C Docherty" />
  <link rel="canonical" href="http://spacebotwar.com:4000/api/arena/" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="http://spacebotwar.com:4000/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Iain C Docherty" href="http://spacebotwar.com:4000/atom.xml" />

  <link rel="stylesheet" href="http://spacebotwar.com:4000/assets/css/all.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.min.css">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <a href="/">
    <img src="/sp_ship.png" id="logo" alt="Site logo"/>
  </a>
  <h2><a href="/">SpaceBotWar</a>.</h2>
  <hr/>
  <h2>
  
    <a href="/api">API Documents</a>
  
  </h2>
  
    
      <h3><a href="/api/start">Start</a></h3>
    
    
      Arena
    
    
      <h3><a href="/api/match">Match</a></h3>
    
  
  </h2>
  <hr/>
  <h2><a href="/blog">Blog posts</a></h2>
  <hr/>
  <h2><a href="/about">About</a></h2>
  <hr/>
  <h2><a href="/faq">FAQ</a></h2>
  <hr/>
  <div>
    <div id="social">
      Follow me:
<div id="stalker">
  
  <a title="icydee on Github" href="https://github.com/icydee">
    <i class="fa fa-github-square"></i>
  </a>
  

  

  

  

  

  

  
  <a title="Iain C Docherty on Facebook" href="https://facebook.com/icydee">
    <i class="fa fa-facebook-square"></i>
  </a>
  

  

  
  <a title="Iain C Docherty on LinkedIn" href="https://www.linkedin.com/in/icydee">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  

  <a title="RSS feed" id="rss" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
</div>

    </div>
  </div>
  </ul>
</nav>

    </div>

    <div class="eleven columns content">
      <h1 id="arena">Arena</h1>

<p>All methods in this section can be carried out by a connection to the <strong>/ws/arena</strong> server.</p>

<p>Each method appends to the route <strong>/</strong> e.g. ‘arenas’ method would be on route <strong>/arenas</strong></p>

<p>The Arena should be used to locate other servers which are running Matches. i.e. where there are matches, or about to be, between two fleets of ships.</p>

<p>Note. Some Servers may only be available to you if you are logged in. See the <strong>Start</strong> server for details on how to log in.</p>
<hr />
<h1 id="server__connect">Server : connect</h1>

<p>On making a Web Socket connection, the server will send a <strong>connect</strong> message indicating the current status of the server. It may also send an update whenever the server status changes.</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>
    <span class='nt'>&quot;code&quot;</span>          <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
    <span class='nt'>&quot;message&quot;</span>       <span class='p'>:</span> <span class='s2'>&quot;Welcome to the Arena&quot;</span><span class='p'>,</span>
    <span class='nt'>&quot;data&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;arena&quot;</span><span class='p'>,</span>
<span class='p'>}</span>
</code></pre></div>
<h2 id="code">code</h2>

<p>The numeric code representing the status of the <strong>lobby</strong> where <strong>0</strong> represents success and any other value indicates a fault.</p>

<h2 id="message">message</h2>

<p>A human readable message, for example a message to the effect that the server is off-line.</p>

<h2 id="data">data</h2>

<p>Supplimentary data, for example the time at which the server is due back on line.</p>
<hr />
<h1 id="client__arenas">Client : arenas</h1>

<p>Get the list of all the current matches.</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>  
    <span class='nt'>&quot;msg_id&quot;</span>        <span class='p'>:</span> <span class='mi'>123</span><span class='p'>,</span>
    <span class='nt'>&quot;client_code&quot;</span>   <span class='p'>:</span> <span class='s2'>&quot;1660686c-8b5d-3b7c-825d-1d828db8f9ca-2f928&quot;</span><span class='p'>,</span>
<span class='p'>}</span>
</code></pre></div>
<h2 id="msg_id_optional">msg_id (optional)</h2>

<p>An <strong>ID</strong> to identify this message. If used the server reply will contain the same message ID. This can be useful if you wish to link the server response to the client request.</p>

<h2 id="client_code_required">client_code (required)</h2>

<p>Your client code.</p>

<h2 id="response">RESPONSE</h2>

<p>The server will respond with a <strong>Server : arenas</strong> message.</p>
<hr />
<h1 id="server__arenas">Server : arenas</h1>

<p>Server response to the <strong>Client : arenas</strong> request</p>
<div class='highlight'><pre><code class='json'><span class='p'>{</span>
    <span class='nt'>&quot;msg_id&quot;</span>        <span class='p'>:</span> <span class='mi'>123</span><span class='p'>,</span>
    <span class='nt'>&quot;code&quot;</span>          <span class='p'>:</span> <span class='mi'>0</span><span class='p'>,</span>
    <span class='nt'>&quot;message&quot;</span>       <span class='p'>:</span> <span class='s2'>&quot;Arenas&quot;</span><span class='p'>,</span>
    <span class='nt'>&quot;arenas&quot;</span>        <span class='p'>:</span> <span class='p'>[{</span>
        <span class='nt'>&quot;server&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;ws://spacebotwar.com/ws/match/scott&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;spectators&quot;</span>    <span class='p'>:</span> <span class='mi'>23</span><span class='p'>,</span>
        <span class='nt'>&quot;start_time&quot;</span>    <span class='p'>:</span> <span class='mi'>-30</span><span class='p'>,</span>
        <span class='nt'>&quot;status&quot;</span>        <span class='p'>:</span> <span class='s2'>&quot;running&quot;</span><span class='p'>,</span>
        <span class='nt'>&quot;competitors&quot;</span>       <span class='p'>:</span> <span class='p'>[{</span>
            <span class='nt'>&quot;name&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;Scaredy Pants&quot;</span><span class='p'>,</span>
            <span class='nt'>&quot;rank&quot;</span>          <span class='p'>:</span> <span class='mi'>37</span><span class='p'>,</span>
            <span class='nt'>&quot;programmer&quot;</span>    <span class='p'>:</span> <span class='s2'>&quot;Dr Death&quot;</span><span class='p'>,</span>
        <span class='p'>},{</span>
            <span class='nt'>&quot;name&quot;</span>          <span class='p'>:</span> <span class='s2'>&quot;Hunter&quot;</span><span class='p'>,</span>
            <span class='nt'>&quot;rank&quot;</span>          <span class='p'>:</span> <span class='mi'>42</span><span class='p'>,</span>
            <span class='nt'>&quot;programmer&quot;</span>    <span class='p'>:</span> <span class='s2'>&quot;Blotto&quot;</span><span class='p'>,</span>
        <span class='p'>}],</span>
    <span class='p'>},{</span>
        <span class='nt'>&quot;route&quot;</span>         <span class='p'>:</span> <span class='s2'>&quot;/ws/arena/silver&quot;</span><span class='p'>,</span>
        <span class='err'>...</span> <span class='err'>etc.</span>
    <span class='p'>}]</span>
<span class='p'>}</span>
</code></pre></div>
<p>The <strong>code</strong>, <strong>message</strong> and <strong>msg_id</strong> are the standard server response.</p>

<h2 id="arenas">arenas</h2>

<p>This is an array of all arenas available to you. Note, if you are not logged in then some rooms may not be available to you.</p>

<h4 id="server">server</h4>

<p>The Server hosting the arena. In order to watch a match you need to make a connection to that server. To leave a match you break the connection.</p>

<h4 id="spectators">spectators</h4>

<p>The number of other people currently viewing this match.</p>

<h4 id="start_time">start_time</h4>

<p>The time that this match started in seconds. Negative means the match has already started. Positive is the number of seconds before the match starts.</p>

<h4 id="status">status</h4>

<p>This is the status of the match, it can be one of</p>

<ul>
<li><strong>starting</strong> the match is currently being set up. Not yet started</li>

<li><strong>running</strong> the match is underway</li>

<li><strong>closing</strong> the match is over and a winner has been decided.</li>
</ul>

<h4 id="competitors">competitors</h4>

<p>The two competitors being matched against each other.</p>

<ul>
<li><strong>name</strong> of the program</li>

<li><strong>rank</strong> current rank of the program</li>

<li><strong>programmer</strong> name of the programmer/owner</li>
</ul>
<hr />
<h1 id="client__connection_to_arena">Client : connection to arena</h1>

<p>To watch a match between two competitors, you first need to make a connection to the server. A list of the current matches can be found in the <strong>arena</strong>.</p>

<p>When you make a connection to the arena you are automatically registered to receive updates on the match progress. This is through a <strong>Server : arenas_state</strong> message (see below).</p>

<p>Once you have connected to a room you can make a number of requests, where the <strong>route</strong> is the name of the method. e.g. <strong>/arena_status</strong></p>

<p>A full list of methods to use within a Match server can be found in the <strong>Match</strong> API.</p>

      <div class="footer">
        <div class="disclaimer">
  

  <p>
    © Iain C Docherty, 2013 &mdash; 
  </p>
</div>

      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
